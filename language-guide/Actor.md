---
description: ë™ì‹œì„± ë¬¸ì œë¥¼ ì›ì²œì ìœ¼ë¡œ ì°¨ë‹¨í•˜ëŠ” íƒ€ì…
---

ë™ì‹œì„± ì½”ë“œë¥¼ ì‘ì„±í•  ë•Œ ê·¼ë³¸ì ìœ¼ë¡œ ì–´ë ¤ìš´ ë¬¸ì œ ì¤‘ í•˜ë‚˜ëŠ” ë°ì´í„° ê²½í•©(data race)ì„ í”¼í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë°ì´í„° ê²½í•©ì€ ë‘ ê°œ ì´ìƒì˜ ìŠ¤ë ˆë“œ(ë˜ëŠ” ì‘ì—…)ê°€ ë™ì‹œì— ë™ì¼í•œ ê³µìœ  ê°€ë³€ ìƒíƒœì— ì ‘ê·¼í•˜ê³ , ê·¸ ì¤‘ í•˜ë‚˜ê°€ ì“°ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•  ë•Œ ë°œìƒí•©ë‹ˆë‹¤.

```swift
class Counter {
    var value = 0
    func increment() -> Int {
        value += 1
        return value
    }
}

let counter = Counter()
Task.detached { 
    counter.increment()
}
Task.detached {
    counter.increment()
}
```

ë‘ ì‘ì—…ì—ì„œ ê°’ì„ ì¦ê°€ì‹œí‚¤ë ¤ í•œë‹¤ê³  ê°€ì •í•´ë³´ê² ìŠµë‹ˆë‹¤. ì´ëŠ” ë°ì´í„° ê²½í•©ì´ ë°œìƒí•˜ëŠ” ëŒ€í‘œì ì¸ ì˜ˆë¡œ, ì‹¤í–‰ ìˆœì„œì— ë”°ë¼ ê²°ê³¼ê°’ì´ 1ê³¼ 1 í˜¹ì€ 2ê³¼ 2ê°€ ë‚˜ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆì»¨ëŒ€, ë‘ ì‘ì—…ì´ ëª¨ë‘ ì´ˆê¸°ê°’ 0ì„ ì½ê³  1ì„ ë”í•˜ê±°ë‚˜, ì´ë¯¸ ì¦ê°€ëœ 1ì„ ì½ê³  ë˜ 1ì„ ë”í•˜ëŠ” ìµœì•…ì˜ ê²½ìš°ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°ì´í„° ê²½í•©ì€ í”„ë¡œê·¸ë¨ì˜ ì„œë¡œ ë‹¤ë¥¸ ìœ„ì¹˜ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ì´ë¥¼ ì •í™•íˆ ì´í•´í•˜ë ¤ë©´ êµ­ì§€ì ì¸ íŒë‹¨ì´ ì•„ë‹ˆë¼ ì „ì²´ì ì¸ ì¶”ë¡ ì´ í•„ìš”í•©ë‹ˆë‹¤. ê²Œë‹¤ê°€ ìš´ì˜ì²´ì œì˜ ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•  ë•Œë§ˆë‹¤ ì‘ì—…ë“¤ì„ ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ì¸í„°ë¦¬ë¹™(interleaving)í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ì´ëŸ¬í•œ ë¬¸ì œëŠ” ë””ë²„ê¹…ì´ ë§¤ìš° ì–´ë µìŠµë‹ˆë‹¤.

ë°ì´í„° ê²½í•©ì€ ê³µìœ  ê°€ë³€ ìƒíƒœë¡œ ì¸í•´ ë°œìƒí•©ë‹ˆë‹¤. ë°ì´í„°ê°€ ë³€ê²½ë˜ì§€ ì•Šê±°ë‚˜, ì—¬ëŸ¬ ì‘ì—… ê°„ì— ê³µìœ ë˜ì§€ ì•ŠëŠ” ê²½ìš°ì—ëŠ” ë°ì´í„° ê²½í•©ì´ ë°œìƒí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë°ì´í„° ê²½í•©ì„ ë°©ì§€í•˜ëŠ” í•œ ê°€ì§€ ë°©ë²•ì€ ê°’ì˜ ë³µì‚¬ê°€ ì¼ì–´ë‚˜ëŠ” ê°’ íƒ€ì…(value type)ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ê°’ íƒ€ì…ì€ ëª¨ë“  ë³€ê²½ì´ í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ ë‚´ë¶€ì—ì„œ êµ­ì†Œì ìœ¼ë¡œ ì´ë£¨ì–´ì§€ê¸° ë•Œë¬¸ì—, ì„œë¡œ ë‹¤ë¥¸ ìŠ¤ë ˆë“œì—ì„œ ë™ì‹œì— ì ‘ê·¼í•˜ë”ë¼ë„ ì•ˆì „í•©ë‹ˆë‹¤.

```swift
struct Counter {
    var value = 0
    mutating func increment() -> Int {
        value += 1
        return value
    }
}

let counter = Counter()
Task.detached { 
    var counter = counter
    counter.increment()
}
Task.detached {
    var counter = counter
    counter.increment()
}
```

`Counter` í´ë˜ìŠ¤ë¥¼ êµ¬ì¡°ì²´ë¡œ ë°”ê¾¸ì–´ ë™ì‹œì„± ë¬¸ì œë¥¼ í•´ê²°í•´ë´…ì‹œë‹¤. ê° ì‘ì—… ë‚´ë¶€ì— ìƒˆë¡œìš´ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ê³ , Counter ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë³µì‚¬í•˜ì—¬ í• ë‹¹í•©ë‹ˆë‹¤. ê° ì‘ì—…ì€ `Counter` ì¸ìŠ¤í„´ìŠ¤ì˜ ë³µì‚¬ë³¸ì„ ê°–ê³  ìˆìœ¼ë¯€ë¡œ, ì„œë¡œ ê°„ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤. ìœ„ ì˜ˆì œë¥¼ ì‹¤í–‰í•˜ë©´, ë‘ ì‘ì—… ëª¨ë‘ 1ì„ ì¶œë ¥í•˜ê²Œ ë©ë‹ˆë‹¤. ì½”ë“œê°€ ë°ì´í„° ê²½í•©ìœ¼ë¡œë¶€í„° ì•ˆì „í•´ì¡ŒìŒì—ë„ ë¶ˆêµ¬í•˜ê³ , ì´ëŠ” ìš°ë¦¬ê°€ ì˜ë„í•œ ë™ì‘ì€ ì•„ë‹™ë‹ˆë‹¤. ì´ë¡œì¨ ì—¬ì „íˆ ê³µìœ  ê°€ë³€ ìƒíƒœê°€ í•„ìš”í•œ ìƒí™©ì´ ì¡´ì¬í•œë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì•„ìš¸ëŸ¬, ë½(Lock), ì„¸ë§ˆí¬ì–´(DispatchSemaphore), ì§ë ¬ ë””ìŠ¤íŒ¨ì¹˜ í(Serial Dispatch Queue)ì™€ ê°™ì€ ë™ê¸°í™” ë„êµ¬ë¥¼ ì‚¬ìš©í•´ ìš°ë¦¬ê°€ ì§ì ‘ ë™ê¸°í™” ë©”ì»¤ë‹ˆì¦˜ì„ êµ¬í˜„í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ëŸ¬í•œ ë„êµ¬ë“¤ì€ ë§¤ë²ˆ ì •í™•í•˜ê³  ì‹ ì¤‘í•˜ê²Œ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´, ë™ê¸°í™”ê°€ ì œëŒ€ë¡œ ì´ë£¨ì–´ì§€ì§€ ì•Šì•„ ë‹¤ì–‘í•œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì´ ë°”ë¡œ ì•¡í„°(Actor)ê°€ ë“±ì‘í•œ ë°°ê²½ì…ë‹ˆë‹¤.

ì•¡í„°ëŠ” ì„œë¡œ ë‹¤ë¥¸ ì‘ì—…ì—ì„œ ë™ì¼í•œ ë°ì´í„°ì— ì•ˆì „í•˜ê²Œ ë™ì‹œì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ëœ ìƒˆë¡œìš´ íƒ€ì…ì…ë‹ˆë‹¤. ì•¡í„°ëŠ” ê³µìœ  ê°€ë³€ ìƒíƒœì— ëŒ€í•œ ë°ì´í„° ê²½í•© ë¬¸ì œë¥¼ ì–¸ì–´ ì°¨ì›ì—ì„œ í•´ê²°í•©ë‹ˆë‹¤. í´ë˜ìŠ¤ì™€ ë‹¬ë¦¬, ì•¡í„°ëŠ” ê°œë°œìê°€ ì§ì ‘ ë½ì´ë‚˜ ì§ë ¬ ë””ìŠ¤íŒ¨ì¹˜ í ë“±ì˜ ë™ê¸°í™” ë©”ì»¤ë‹ˆì¦˜ì„ êµ¬í˜„í•˜ì§€ ì•Šì•„ë„ ìì²´ì ìœ¼ë¡œ ë™ê¸°í™”ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤.

```swift
actor Counter {
    let id = UUID()
    var value = 0
}
```

ì•¡í„°ëŠ” í´ë˜ìŠ¤ì™€ ìœ ì‚¬í•œ ì ì´ ë§ìŠµë‹ˆë‹¤. í´ë˜ìŠ¤ì™€ ë§ˆì°¬ê°€ì§€ë¡œ, ì•¡í„°ëŠ” í™(heap) ë©”ëª¨ë¦¬ ì˜ì—­ì— ì €ì¥ë˜ëŠ” ì°¸ì¡° íƒ€ì…(reference type)ì…ë‹ˆë‹¤. ì•¡í„°ëŠ” ìƒì„±ì(initalizer), ë©”ì„œë“œ, í”„ë¡œí¼í‹°, ì„œë¸ŒìŠ¤í¬ë¦½íŠ¸(subscript)ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë©°, í™•ì¥(extension)í•˜ê±°ë‚˜ í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ì•¡í„°ëŠ” ì œë„¤ë¦­ìœ¼ë¡œ ì •ì˜ë˜ê±°ë‚˜ ì œë„¤ë¦­ íƒ€ì…ê³¼ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

ì•¡í„°ê°€ í´ë˜ìŠ¤ì™€ êµ¬ë³„ë˜ëŠ” ê°€ì¥ í° ì°¨ì´ì ì€ ê³µìœ  ê°€ë³€ ìƒíƒœë¥¼ ë³´í˜¸í•œë‹¤ëŠ” ì ì— ìˆìŠµë‹ˆë‹¤. ì•¡í„°ëŠ” í”„ë¡œí¼í‹°ì™€ ë©”ì„œë“œë¥¼ í”„ë¡œê·¸ë¨ì˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„ìœ¼ë¡œë¶€í„° ê²©ë¦¬í•¨ìœ¼ë¡œì¨ ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ë³´í˜¸í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë³´í˜¸ëŠ” ëª¨ë“  ì ‘ê·¼ì´ ë°˜ë“œì‹œ ì•¡í„°ë¥¼ í†µí•´ì„œë§Œ ì´ë£¨ì–´ì ¸ì•¼ í•œë‹¤ëŠ” ì›ì¹™ì— ê¸°ë°˜í•©ë‹ˆë‹¤.



# Isolation to Protect State from the Rest of the Program

ëª¨ë“  ì•¡í„°ëŠ” ì•¡í„° ê²©ë¦¬(Actor Isolation)ë¥¼ í†µí•´, í•œ ë²ˆì— ë‹¨ í•˜ë‚˜ì˜ ì‘ì—…ë§Œì´ í•´ë‹¹ ì•¡í„°ì˜ ë°ì´í„°ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•¨ìœ¼ë¡œì¨ ìì‹ ë§Œì˜ ê³ ìœ í•œ ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ë³´í˜¸í•©ë‹ˆë‹¤. ì•¡í„°ì— ì„ ì–¸ëœ ëª¨ë“  ì €ì¥ ë° ê³„ì‚° í”„ë¡œí¼í‹°, ë©”ì„œë“œ, ì„œë¸ŒìŠ¤í¬ë¦½íŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í•´ë‹¹ ì•¡í„°ì— ê²©ë¦¬ë©ë‹ˆë‹¤. 

'ì•¡í„°ì— ê²©ë¦¬ëœë‹¤'ëŠ” ì•¡í„°ì˜ í”„ë¡œí¼í‹°ë‚˜ ë©”ì„œë“œì— ëŒ€í•œ ëª¨ë“  ì ‘ê·¼ì´ ë°˜ë“œì‹œ í•´ë‹¹ ì•¡í„°ë¥¼ í†µí•´ì„œë§Œ ì´ë£¨ì–´ì ¸ì•¼ í•œë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. ì¦‰, ì•¡í„° ì™¸ë¶€(ê²©ë¦¬ë˜ì§€ ì•Šì€ ì½”ë“œ)ì—ì„œ ì•¡í„° ë‚´ë¶€ì— ì ‘ê·¼í•˜ë ¤ë©´ ë°˜ë“œì‹œ ë¹„ë™ê¸°(Asynchronous) ë°©ì‹ìœ¼ë¡œ ì ‘ê·¼í•´ì•¼ í•©ë‹ˆë‹¤. ì•¡í„° ë‚´ë¶€ì˜ ë©”ì„œë“œëŠ” ë³„ë„ë¡œ `async` í‚¤ì›Œë“œë¥¼ ëª…ì‹œí•˜ì§€ ì•Šë”ë¼ë„, ê¸°ë³¸ì ìœ¼ë¡œ ë¹„ë™ê¸° ë©”ì„œë“œë¡œ ê°„ì£¼ë©ë‹ˆë‹¤.

```swift
extension Counter {
    func incrment() -> Int {
        value += 1
        return value
    }
}
```  

ìœ„ ì˜ˆì œëŠ” ì„œë¡œ ë‹¤ë¥¸ ì‘ì—…ì—ì„œ `increment()` ë©”ì„œë“œë¥¼ ë¹„ë™ê¸°ì ìœ¼ë¡œ í˜¸ì¶œí•¨ìœ¼ë¡œì¨, ì•¡í„°ì— ì•ˆì „í•˜ê²Œ ì ‘ê·¼í•˜ëŠ” ëª¨ìŠµì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ì•¡í„°ì˜ ë™ê¸°í™” ë©”ì»¤ë‹ˆì¦˜ì€ í•œ ì‘ì—…ì´ `incrment()`ë¥¼ í˜¸ì¶œí•´ ì™„ë£Œë˜ê¸° ì „ê¹Œì§€, ë‹¤ë¥¸ ì‘ì—…ì—ì„œ ë™ì¼í•œ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì§€ ëª»í•˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. ì¦‰, í•œ ì‘ì—…ì´ ì´ë¯¸ ì•¡í„°ë¥¼ ì‚¬ìš© ì¤‘ì¼ ë•Œ ë‹¤ë¥¸ ì‘ì—…ì´ ì•¡í„°ì— ì ‘ê·¼ì„ ì‹œë„í•˜ë©´, í•´ë‹¹ ì‘ì—…ì€ ì•¡í„°ì— ëŒ€í•œ ì ‘ê·¼ì„ ì˜ˆì•½(enqueue)í•˜ê³ , ì´ì „ ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ì¼ì‹œ ì¤‘ë‹¨(suspend)ë©ë‹ˆë‹¤. ì´ì „ ì‘ì—…ì´ ì•¡í„°ì— ëŒ€í•œ ì ‘ê·¼ì„ ë§ˆì¹œ í›„ì—ì•¼, ë¹„ë¡œì†Œ ë‹¤ìŒ ì‘ì—…ì´ ì ‘ê·¼ì„ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê²°ê³¼ì ìœ¼ë¡œ ê²°ê³¼ê°’ì´ 1ê³¼ 2 ë˜ëŠ” 2ì™€ 1ì´ ë  ìˆ˜ëŠ” ìˆì§€ë§Œ, ë™ì¼í•œ ê°’ì„ ë‘ ë²ˆ ì½ê±°ë‚˜ ê°’ì„ ê±´ë„ˆë›°ëŠ” ì¼ì€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

ì•¡í„°ëŠ” ì¢…ì¢… ë©”ì¼ë°•ìŠ¤(mailbox)ì— ë¹„ìœ ë©ë‹ˆë‹¤. ë¹„ë™ê¸° í•¨ìˆ˜ í˜¸ì¶œì€ ì•¡í„°ê°€ ì•ˆì „í•˜ê²Œ ì‹¤í–‰í•  ìˆ˜ ìˆì„ ë•Œ í•´ë‹¹ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë„ë¡ ìš”ì²­í•˜ëŠ” ì¼ì¢…ì˜ ë©”ì‹œì§€ë¡œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë©”ì‹œì§€ë“¤ì€ ì•¡í„°ì˜ ë©”ì¼ë°•ìŠ¤ì— ì €ì¥ë˜ë©°, ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìª½ì€ ì•¡í„°ê°€ í•´ë‹¹ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•  ë•Œê¹Œì§€ ì¼ì‹œ ì¤‘ë‹¨ë©ë‹ˆë‹¤. ì•¡í„°ëŠ” ë©”ì¼ë°•ìŠ¤ì— ì €ì¥ëœ ë©”ì‹œì§€ë¥¼ í•œ ë²ˆì— í•˜ë‚˜ì”© ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì—, ë™ì¼í•™ ì•¡í„°ì—ì„œ ë‘ ê°œì˜ ìš”ì²­(ì‘ì—…)ì´ ë™ì‹œì— ì‹¤í–‰ë˜ëŠ” ì¼ì´ ì ˆëŒ€ ì—†ìŠµë‹ˆë‹¤. ì´ëŠ” ì•¡í„°ì— ê²©ë¦¬ëœ ìƒíƒœì— ëŒ€í•œ ë°ì´í„° ê²½í•©ì„ ë°©ì§€í•˜ëŠ” í•µì‹¬ ë©”ì»¤ë‹ˆì¦˜ì…ë‹ˆë‹¤.

ì•¡í„°ì— ê²©ë¦¬ëœ ë©”ì„œë“œëŠ” ë™ì¼í•œ ì•¡í„°ì— ê²©ë¦¬ëœ ë‹¤ë¥¸ ë©”ì„œë“œë¥¼ ììœ ë¡­ê²Œ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë‚´ë¶€ ì ‘ê·¼ì€ ëª¨ë‘ ë™ê¸°ì (Synchronous)ìœ¼ë¡œ ì²˜ë¦¬ë˜ë©°, í˜¸ì¶œ ì‹œ `await` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.

```swift
extension Counter {
    func resetSlowly(_ newValue: Int) {
        value = 0
        for _ in 0..<newValue {
            incrment()
        }
        assert(value == newValue)
    }
}
```

ì•¡í„° ì™¸ë¶€ì—ì„œ ì•¡í„°ì˜ í”„ë¡œí¼í‹°ì— ì ‘ê·¼í•  ê²½ìš°, ì˜¤ì§ ì½ê¸° ì „ìš©(read-only)ìœ¼ë¡œë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰, ì•¡í„° ì™¸ë¶€ì—ì„œ ì•¡í„°ì˜ í”„ë¡œí¼í‹°ì— ì ‘ê·¼í•´ ì§ì ‘ ê°’ì„ í• ë‹¹í•  ìˆ˜ ì—†ìœ¼ë©°, ê°’ì„ ë³€ê²½í•˜ë ¤ë©´ ë°˜ë“œì‹œ ì•¡í„° ë‚´ë¶€ì˜ ë©”ì„œë“œë¥¼ í†µí•´ì„œë§Œ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.

```swift
func increment(_ counter: Counter, newValue: Int) async {
    await counter.incrment() // âœ…
    await counter.value += 1 // âŒ ì˜¤ë¥˜: Mutation of this property is only permitted within the actor 
}
```  

{% hint style="info" %}
**Note** 
ì´ëŠ” ì›ìì„±(atomicity)ì„ ë³´ì¥í•˜ê¸° ìœ„í•œ ì œí•œ ì‚¬í•­ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ë¹„ë™ê¸°ì ìœ¼ë¡œ í”„ë¡œí¼í‹°ë¥¼ ê°œë³„ì ìœ¼ë¡œ ì„¤ì •í•  ê²½ìš°, ì˜ë„ì¹˜ ì•Šê²Œ ë¶ˆë³€ ì¡°ê±´(invariants)ì´ ê¹¨ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì•„ë˜ ì˜ˆì œì²˜ëŸ¼ ì€í–‰ ì”ê³ (balance)ì™€ ê±°ë˜ ê¸°ë¡(transactionLog)ë¥¼ ê°ê° ë”°ë¡œ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤ë©´, ì´ ë‘ ì—°ì‚° ì‚¬ì´ì— ë‹¤ë¥¸ ì‘ì—…ì´ ë¼ì–´ë“¤ ìˆ˜ ìˆì–´ ì›ìì„±ì´ ë³´ì¥ë˜ì§€ ì•Šê³ , ê²½ìŸ ì¡°ê±´(race condition)ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
await account.balance = 2000
await account.transactionLog = ["Deposited 1000"]
```

ì´ ê²½ìš°, ì”ê³ ëŠ” ë³€ê²½ë˜ì—ˆì§€ë§Œ ê±°ë˜ ê¸°ë¡ì€ ëˆ„ë½ë˜ëŠ” ë“± ë…¼ë¦¬ì ìœ¼ë¡œ í•¨ê»˜ ìœ ì§€ë˜ì–´ì•¼ í•  ìƒíƒœë“¤ ì‚¬ì´ì˜ ì¼ê´€ì„±ì´ ê¹¨ì§ˆ ìœ„í—˜ì´ ìƒê¹ë‹ˆë‹¤.
{% endhint %}

ì•¡í„° ë‚´ë¶€ì˜ `let` í”„ë¡œí¼í‹°ì—ëŠ” ë¹„ë™ê¸° ì ‘ê·¼ì´ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì™¸ë¶€ ëª¨ë“ˆì— ì •ì˜ëœ ì•¡í„°ì˜ `let` í”„ë¡œí¼í‹°ì— ì ‘ê·¼í•  ê²½ìš°ì—ëŠ” ë¹„ë™ê¸°ì ìœ¼ë¡œ ì ‘ê·¼í•´ì•¼ í•©ë‹ˆë‹¤.

```swift
// ì™¸ë¶€ ëª¨ë“ˆì—ì„œ Counter ì•¡í„°ì˜ identifierì— ë¹„ë™ê¸°ì ìœ¼ë¡œ ì ‘ê·¼í•˜ëŠ” ì˜ˆì‹œ
```

ì´ëŠ” ì™¸ë¶€ ëª¨ë“ˆì˜ ì•¡í„°ì—ì„œ í•´ë‹¹ í”„ë¡œí¼í‹°ê°€ í–¥í›„ `let`ì—ì„œ `var`ë¡œ ë³€ê²½ë˜ë”ë¼ë„, ì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œì— ìµœì†Œí•œì˜ ìˆ˜ì •ë§Œìœ¼ë¡œ ëŒ€ì‘í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•œ ì„¤ê³„ì…ë‹ˆë‹¤.


## Non-Isolated Declarations

ì•¡í„°ì˜ ë‚´ë¶€ ìƒíƒœëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì•¡í„°ì— ê²©ë¦¬ë˜ì§€ë§Œ, í”„ë¡œí¼í‹°ë‚˜ ë©”ì„œë“œ ì•ì— `nonisolated` í‚¤ì›Œë“œë¥¼ ë¶™ì´ë©´ ê²©ë¦¬ë˜ì§€ ì•Šë„ë¡ ì„ ì–¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë™ì‹œ ì ‘ê·¼ìœ¼ë¡œ ì¸í•´ ë°ì´í„° ê²½í•©ì´ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ì—†ëŠ” `let` í”„ë¡œí¼í‹°ë‚˜ ê²©ë¦¬ëœ ìƒíƒœì— ì ‘ê·¼í•˜ì§€ ì•ŠëŠ” ë©”ì„œë“œì— ëŒ€í•´ ë§¤ë²ˆ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì ‘ê·¼í•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ê²½ìš°, í•´ë‹¹ ì„ ì–¸ì— `nonisolated`ë¥¼ ëª…ì‹œí•˜ì—¬ ì•¡í„° ê²©ë¦¬ì—ì„œ ì œì™¸ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
actor Person {
    nonisolated let name: String
    var address: String
}

let person = Person()
Task.detached { 
    _ = person.name
}
```

í”„ë¡œí¼í‹°ë‚˜ ë©”ì„œë“œê°€ `nonisolated`ë¡œ ì„ ì–¸ë˜ë©´, ë¹„ë¡ ì•¡í„° ë‚´ë¶€ì— ì •ì˜ë˜ì–´ ìˆë”ë¼ë„ ì‹¤ì œë¡œëŠ” ì•¡í„° ì™¸ë¶€ì— ìˆëŠ” ê²ƒì²˜ëŸ¼ ê°„ì£¼í•©ë‹ˆë‹¤. ì´ëŠ” í•´ë‹¹ í”„ë¡œí¼í‹°ë‚˜ ë©”ì„œë“œê°€ ì•¡í„°ì˜ ê²©ë¦¬ëœ ìƒíƒœë¥¼ ë³´í˜¸í•˜ì§€ ì•Šìœ¼ë©°, ì—¬ëŸ¬ ì‘ì—…ì—ì„œ ë™ê¸°ì ìœ¼ë¡œ ë™ì‹œì— ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `name` í”„ë¡œí¼í‹°ë‚˜ `description()` ë©”ì„œë“œëŠ” ì•¡í„° ì™¸ë¶€ì—ì„œ ë™ê¸°ì ìœ¼ë¡œ í˜¸ì¶œí•´ ê°’ì„ ë°”ë¡œ ë°˜í™˜ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¨, ë¹„ê²©ë¦¬ í”„ë¡œí¼í‹°ëŠ” ë°˜ë“œì‹œ `let`ìœ¼ë¡œ ì„ ì–¸ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

```swift
extension Person {
    nonisolated func description() async -> String {
        "\(name) lives in \(await address)"
    }
}
```

ë˜í•œ, ê²©ë¦¬ë˜ì§€ ì•Šì€ ë©”ì„œë“œëŠ” ì•¡í„°ì˜ ë‚´ë¶€ ìƒíƒœì— ì ‘ê·¼í•  ë•ŒëŠ” ë°˜ë“œì‹œ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì ‘ê·¼í•´ì•¼ í•©ë‹ˆë‹¤. ì¦‰, `nonisolated` ë©”ì„œë“œ ë‚´ì—ì„œ ì•¡í„°ì˜ ê²©ë¦¬ëœ í”„ë¡œí¼í‹°ë‚˜ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ `await` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.


### Closures That Do Not Inherit Actor Isolation

```swift
extension Person {
    func work(at company: String) -> String {
        Task.detached {
            "\(await self.name) works at \(company)"
        }
    }
}
```

`Detached Task`ëŠ” ì•¡í„°ë¥¼ í¬í•¨í•œ ì–´ë–¤ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë„ ìƒì†í•˜ì§€ ì•Šìœ¼ë©°, ì™„ì „íˆ ë…ë¦½ì ì¸ ì‘ì—… ì»¨í…ìŠ¤íŠ¸ë¥¼ ê°–ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì•¡í„° ë‚´ë¶€ì˜ ë©”ì„œë“œì—ì„œ `Detached Task`ë¥¼ ìƒì„±í•˜ë©´, ì´ ì‘ì—…ì€ ì•¡í„° ê²©ë¦¬ ê²½ê³„ ë°”ê¹¥ì—ì„œ ì‹¤í–‰ë˜ë©°, ì•¡í„°ì˜ ìƒíƒœì— ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. `Detached Task` ë‚´ë¶€ì—ì„œ ì•¡í„°ì— ê²©ë¦¬ëœ ìƒíƒœì— ì ‘ê·¼í•˜ë ¤ë©´ ë°˜ë“œì‹œ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì ‘ê·¼í•´ì•¼ í•©ë‹ˆë‹¤.


### Protocol Requirements That Must Be Implemented as Non-Isolated

ë‹¤ë¥¸ íƒ€ì…ë“¤ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ, ì•¡í„°ë„ í”„ë¡œí† ì½œì˜ ìš”êµ¬ì‚¬í•­ì„ ì¶©ì¡±í•œë‹¤ë©´ í•´ë‹¹ í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `Person` ì•¡í„°ê°€ `Equatable` í”„ë¡œí† ì½œì„ ë”°ë¥´ë„ë¡ ë§Œë“¤ì–´ ë´…ì‹œë‹¤. ì´ë•Œ ì •ì (static) == ë©”ì„œë“œëŠ” ê³„ì • ì‹ë³„ì(id)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‘ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë¹„êµí•œ ë’¤, ê·¸ ê²°ê³¼ë¥¼ ë¶ˆë¦¬ì–¸ ê°’ìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.

```swift
extension Person: Equatable {
    nonisolated static func == (lhs: Person, rhs: Person) -> Bool {
        lhs.name == rhs.name
    }
}
```

ì´ ì •ì  ë©”ì„œë“œëŠ” ì•¡í„° ì¸ìŠ¤í„´ìŠ¤(self)ì™€ ë¬´ê´€í•˜ê²Œ ë™ì‘í•˜ë©°, ë‘ ê°œì˜ `Person` ì•¡í„° íƒ€ì… ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ì•„ ì²˜ë¦¬í•  ë¿ ì–´ëŠ ì•¡í„°ì—ë„ ì†í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë˜í•œ, ë©”ì„œë“œ ë‚´ë¶€ì—ì„œëŠ” ì˜¤ì§ `let` í”„ë¡œí¼í‹°ì—ë§Œ ì ‘ê·¼í•˜ê³  ìˆìœ¼ë¯€ë¡œ, ì•¡í„°ì— ì˜í•´ ê²©ë¦¬ë˜ì–´ ë³´í˜¸ë  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ ì •ì  ë©”ì„œë“œë¥¼ `nonisolated`ë¡œ ì„ ì–¸í•˜ì—¬ ì•¡í„° ê²©ë¦¬ì—ì„œ ì œì™¸í•˜ëŠ” ê²ƒì´ ì ì ˆí•©ë‹ˆë‹¤.

```swift
extension Person: Hashable {
    nonisolated func hash(into hasher: inout Hasher) {
        hasher.combine(name)
    }
}
```

ì´ë²ˆì—ëŠ” `Person` ì•¡í„°ê°€ `Hashable` í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•˜ë„ë¡ ì˜ˆì œë¥¼ í™•ì¥í•´ ë³´ê² ìŠµë‹ˆë‹¤. `Hashable`ì„ ì¤€ìˆ˜í•˜ê¸° ìœ„í•´ì„œëŠ” `hash(into:)` ë©”ì„œë“œë¥¼ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, `Hashable`ì€ ê²©ë¦¬ë˜ì§€ ì•Šì€ í”„ë¡œí† ì½œì´ê¸° ë•Œë¬¸ì—, í•´ë‹¹ ë©”ì„œë“œë¥¼ ì•¡í„° ë‚´ë¶€ì— ê²©ë¦¬ëœ ìƒíƒœë¡œ êµ¬í˜„í•˜ë©´ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤. ë˜í•œ, `hash(into:)`ëŠ” ì™¸ë¶€ ëª¨ë“ˆì—ì„œ í•´ì‹œ ê°’ì„ ê³„ì‚°í•  ë•Œ ë™ê¸°ì ìœ¼ë¡œ í˜¸ì¶œë˜ë¯€ë¡œ, ì•¡í„°ì˜ ê²©ë¦¬ëœ ìƒíƒœì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ ë©”ì„œë“œë¥¼ `nonisolated`ë¡œ ì„ ì–¸í•´ ì•¡í„°ì— ê²©ë¦¬ë˜ì§€ ì•Šì€ í”„ë¡œí¼í‹°ì— ë™ê¸°ì ìœ¼ë¡œ ì ‘ê·¼í•˜ì—¬ í•´ì‹œ ê°’ì„ ê³„ì‚°í•˜ë„ë¡ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.


# Actor And Sendable Types

ì•¡í„°ëŠ” ìì²´ì ì¸ ë™ê¸°í™” ë©”ì»¤ë‹ˆì¦˜ì„ í†µí•´ ë‚´ë¶€ì˜ ê³µìœ  ê°€ë³€ ìƒíƒœë¥¼ ë³´í˜¸í•˜ë¯€ë¡œ, ì•¡í„° ì¸ìŠ¤í„´ìŠ¤ëŠ” ì„œë¡œ ë‹¤ë¥¸ ìŠ¤ë ˆë“œ(ë™ì‹œ ì»¨í…ìŠ¤íŠ¸) ê°„ì— ì•ˆì „í•˜ê²Œ ê³µìœ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ íŠ¹ì„± ë•ë¶„ì—, ëª¨ë“  ì•¡í„° íƒ€ì…ì€ ì•”ì‹œì ìœ¼ë¡œ `Sendable` í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤.

```swift
class Person {
    let name: String
    var address: String
}
actor BankAccount {
    var owners: [Person] = []
    func primaryOwner() -> Person? {
        owners.first
    }
}
Task.detached {
    _ = await bankAccount.primaryOwner() 
    // ğŸ”´ ì˜¤ë¥˜: Non-sendable result type 'Person?' cannot be sent from actor-isolated context in call to instance method 'primaryOwner()'
}
```

ìœ„ ì˜ˆì œì—ì„œ `primaryOwner()`ëŠ” ì•¡í„° ì™¸ë¶€ì—ì„œ ë¹„ë™ê¸°ì ìœ¼ë¡œ í˜¸ì¶œë  ìˆ˜ ìˆìœ¼ë©°, `Sendable`ì„ ë”°ë¥´ì§€ ì•ŠëŠ” `Person` ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ ë°˜í™˜ëœ `Person` ì¸ìŠ¤í„´ìŠ¤ëŠ” ì•¡í„° ì™¸ë¶€ì˜ ì„ì˜ì˜ ì‘ì—…ì—ì„œ ë™ì‹œì— ì ‘ê·¼ë˜ê±°ë‚˜ ìˆ˜ì •ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ë°ì´í„° ê²½í•©ì´ë‚˜ ì˜ˆê¸°ì¹˜ ì•ŠëŠ” ìƒíƒœ ë³€ê²½ê³¼ ê°™ì€ ë™ì‹œì„± ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°’ì„ ë³€ê²½í•­ëŠ” ê²Œ ì•„ë‹ˆë¼ ë‹¨ìˆœíˆ ì ‘ê·¼í•˜ë”ë¼ë„ ë¬¸ì œê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì•¡í„° ë‚´ë¶€ì—ì„œ `address`ê°€ ìˆ˜ì •ë˜ëŠ” ë™ì•ˆ, ì™¸ë¶€ì—ì„œë„ í•´ë‹¹ ê°’ì„ ë™ì‹œì— ì ‘ê·¼í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ì´ì²˜ëŸ¼, ì•¡í„°ì— ê²©ë¦¬ëœ ìƒíƒœì˜ ë™ì‹œ ì ‘ê·¼ìœ¼ë¡œ ì¸í•œ ë™ì‹œì„± ë¬¸ì œë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì•¡í„°ì˜ ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ì™€ ë°˜í™˜ê°’ì€ ëª¨ë‘ `Sendable`ì´ì–´ì•¼ í•©ë‹ˆë‹¤. ë˜í•œ, `let`ìœ¼ë¡œ ì„ ì–¸ëœ í”„ë¡œí¼í‹°ì— ì ‘ê·¼í•˜ëŠ” ê²½ìš°ì—ë„ í•´ë‹¹ í”„ë¡œí¼í‹°ê°€ `Sendable`ì´ì–´ì•¼ í•©ë‹ˆë‹¤. ì•¡í„°ëŠ” ì˜¤ì§ `Sebdable`í•œ ê°’ë§Œ ë‚´ë³´ë‚´ë³´ê±°ë‚˜ ë“¤ì—¬ì˜¤ë„ë¡ ê°•ì œí•¨ìœ¼ë¡œì¨, ê³µìœ  ê°€ë³€ ìƒíƒœì— ëŒ€í•œ ì°¸ì¡°ê°€ ì•¡í„°ì˜ ê²©ë¦¬ ê²½ê³„ë¥¼ ë„˜ë‚˜ë“œëŠ” ì¼ì„ ì›ì²œì ìœ¼ë¡œ ì°¨ë‹¨í•©ë‹ˆë‹¤.


# Protocol Conformances

ëª¨ë“  ì•¡í„° íƒ€ì…ì€ ì•”ì‹œì ìœ¼ë¡œ `Actor` í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤.

```swift
protocol Actor: AnyObject, Sendable { }
```

`Actor` í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ë©´ ëª¨ë“  ì•¡í„°ì— ê³µí†µì ìœ¼ë¡œ ì ìš©í•  ìˆ˜ ìˆëŠ” í”„ë¡œí¼í‹°ë‚˜ ë©”ì„œë“œë¥¼ ì •ì˜í•˜ê±°ë‚˜, ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ í™•ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, `Actor` í”„ë¡œí† ì½œì˜ ìš”êµ¬ì‚¬í•­(í”„ë¡œí¼í‹°, ë©”ì„œë“œ, ì„œë¸ŒìŠ¤í¬ë¦½íŠ¸ ë“±)ì€ í™•ì¥ì„ í¬í•¨í•´ ëª¨ë‘ í•´ë‹¹ ì•¡í„° ì¸ìŠ¤í„´ìŠ¤ì— ê²©ë¦¬ë˜ì–´ ì‹¤í–‰ë©ë‹ˆë‹¤.

```swift
protocol DataProcessible: Actor {  // only actor types can conform to this protocol
  var data: Data { get }           // actor-isolated to self
}

extension DataProcessible {
  func compressData() -> Data {    // actor-isolated to self
    // use data synchronously
  }
}

actor MyProcessor : DataProcessible {
  var data: Data                   // okay, actor-isolated to self
  
  func doSomething() {
    let newData = compressData()   // okay, calling actor-isolated method on self
    // use new data
  }
}
```

í´ë˜ìŠ¤, ì—´ê±°í˜•, êµ¬ì¡°ì²´ì™€ ê°™ì€ ë‹¤ë¥¸ ìœ í˜•ì˜ íƒ€ì…ì€ ìƒíƒœë¥¼ ê²©ë¦¬ì‹œí‚¬ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—, `Actor` í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì•¡í„°ëŠ” ë¹„ë™ê¸° ìš”êµ¬ì‚¬í•­ì´ í¬í•¨ëœ í”„ë¡œí† ì½œë„ ì¤€ìˆ˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
protocol Server {
  func send<Message: MessageType>(message: Message) async throws -> Message.Reply
}

actor MyActor: Server {
  func send<Message: MessageType>(message: Message) async throws -> Message.Reply { 
  }
}
```

ë°˜ë©´, `Hashable`, `Identifiable`ê³¼ ê°™ì´ ë™ê¸° ìš”êµ¬ì‚¬í•­ì´ í¬í•¨ëœ í”„ë¡œí† ì½œì€ ê¸°ë³¸ì ìœ¼ë¡œ ì•¡í„°ì—ì„œ ì§ì ‘ ì¤€ìˆ˜í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•˜ë ¤ë©´, ë©”ì„œë“œë‚˜ í”„ë¡œí¼í‹°ì— `nonisolated` í‚¤ì›Œë“œë¥¼ ë¶™ì—¬ ë¹„ê²©ë¦¬ë¡œ ì„ ì–¸í•´ì•¼ í•©ë‹ˆë‹¤.



# Isolation Rules for Actor Initializers and Deinitializers

{% hint style="info" %}
**Info** ì´ ì„¹ì…˜ì€ í˜„ì¬ ì‘ì„± ì¤‘ì…ë‹ˆë‹¤.
{% endhint %}



## Non-Delegating Initializer

{% hint style="info" %}
**Info** ì´ ì„¹ì…˜ì€ í˜„ì¬ ì‘ì„± ì¤‘ì…ë‹ˆë‹¤.
{% endhint %}



### Initializers with isolated self

{% hint style="info" %}
**Info** ì´ ì„¹ì…˜ì€ í˜„ì¬ ì‘ì„± ì¤‘ì…ë‹ˆë‹¤.
{% endhint %}



### Initializers with non-isolated self   

{% hint style="info" %}
**Info** ì´ ì„¹ì…˜ì€ í˜„ì¬ ì‘ì„± ì¤‘ì…ë‹ˆë‹¤.
{% endhint %}



## Delegating Initializers

{% hint style="info" %}
**Info** ì´ ì„¹ì…˜ì€ í˜„ì¬ ì‘ì„± ì¤‘ì…ë‹ˆë‹¤.
{% endhint %}



## Deinitalizer 

{% hint style="info" %}
**Info** ì´ ì„¹ì…˜ì€ í˜„ì¬ ì‘ì„± ì¤‘ì…ë‹ˆë‹¤.
{% endhint %}



# Actors Synchronize Using a Serial Executor

ì‹¤í–‰ì(executor)ëŠ” ë¹„ë™ê¸° ì‘ì—…ì´ ì–´ë–¤ ìŠ¤ë ˆë“œ(ë˜ëŠ” í)ì—ì„œ ì‹¤í–‰ë ì§€, ì–´ë–¤ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì§ˆì§€, ê·¸ë¦¬ê³  ì–´ë–¤ ìˆœì„œë¡œ ì²˜ë¦¬ë ì§€ë¥¼ ì¡°ìœ¨í•˜ëŠ” ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì…ë‹ˆë‹¤. ì‹¤í–‰ìëŠ” ì‘ì—…ì„ íŠ¹ì • ìŠ¤ë ˆë“œì— ì§ì ‘ í• ë‹¹í•˜ì§„ ì•Šì§€ë§Œ, ì–´ë–¤ ì‹¤í–‰ í™˜ê²½ì—ì„œ ì‘ì—…ì´ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ”ì§€ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ë˜í•œ, ì£¼ì–´ì§„ ìš°ì„ ìˆœìœ„ì— ë”°ë¼ ë” ì¤‘ìš”í•œ ì‘ì—…ì„ ìš°ì„ ì ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ë©°, ì§ë ¬ ì‹¤í–‰ìì˜ ê²½ìš°ì—ëŠ” ì‘ì—… ê°„ì˜ ì‹¤í–‰ ìˆœì„œë¥¼ ì œì–´í•˜ì—¬, ë°ì´í„° ì¶©ëŒ ì—†ì´ ì•ˆì „í•˜ê²Œ ì‹¤í–‰ë˜ë„ë¡ í•©ë‹ˆë‹¤. SwiftëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì „ì—­ ë™ì‹œ ì‹¤í–‰ì(global concurrent executor)ì™€ ì§ë ¬ ì‹¤í–‰ì(serial executor)ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

ëª¨ë“  ì•¡í„° ì¸ìŠ¤í„´ìŠ¤ëŠ” ìì‹ ë§Œì˜ ì§ë ¬ ì‹¤í–‰ìë¥¼ ê¸°ë³¸ ì‹¤í–‰ì(default executor)ë¡œ ê°–ìŠµë‹ˆë‹¤. ì§ë ¬ ì‹¤í–‰ìëŠ” ì•¡í„°ì— ê²©ë¦¬ëœ ìƒíƒœë¥¼ ìŠ¤ë ˆë“œì— ì•ˆì „í•˜ê²Œ ë³´í˜¸í•˜ëŠ” í•µì‹¬ ë©”ì»¤ë‹ˆì¦˜ì…ë‹ˆë‹¤. ì§ë ¬ ì‹¤í–‰ìëŠ” í•œ ë²ˆì— í•˜ë‚˜ì˜ ë¶€ë¶„ ì‘ì—…(parital task)ë§Œì„ ì‹¤í–‰í•˜ë©°, ë‘ ì‘ì—…ì´ ë™ì‹œì— ì•¡í„°ì— ê²©ë¦¬ëœ ìƒíƒœì— ì ‘ê·¼í•˜ì§€ ëª»í•˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. ì§ë ¬ ì‹¤í–‰ìëŠ” ì‘ì—…ì„ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•œë‹¤ëŠ” ì§ê´€ì„ ì£¼ì§€ë§Œ, ì‹¤ì œë¡œëŠ” íì— ë“±ë¡ëœ ìˆœì„œì™€ ì‹¤í–‰ ìˆœì„œê°€ ë°˜ë“œì‹œ ì¼ì¹˜í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. Swift ëŸ°íƒ€ì„ì€ ìš°ì„ ìˆœìœ„ ì—­ì „(Priority Inversion)ì„ ë°©ì§€í•˜ê¸° ìœ„í•´, ìš°ì„ ìˆœìœ„ ìŠ¹ê²©(Priority Escalation)ê³¼ ê°™ì€ ê¸°ë²•ì„ ì‚¬ìš©í•˜ì—¬ ì‘ì—… ê°„ ìš°ì„ ìˆœìœ„ë¥¼ ê³ ë ¤í•´ ì‹¤í–‰ ìˆœì„œë¥¼ ìœ ì—°í•˜ê²Œ ì¡°ì •í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ìŠ¤ì¼€ì¤„ë§ ì „ëµì€ ì—„ê²©í•œ ì„ ì…ì„ ì¶œ(FIFO) ìˆœì„œë¡œ ì‘ì—…ì„ ì‹¤í–‰í•˜ëŠ” ì§ë ¬ ë””ìŠ¤íŒ¨ì¹˜ íì™€ êµ¬ë¶„ë˜ëŠ” íŠ¹ì§•ì´ë©°, ë¹„ë™ê¸° í•¨ìˆ˜ì˜ íš¨ìœ¨ì ì¸ ì‹¤í–‰ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤. 

ëª¨ë“  ì•¡í„°ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í˜‘ë ¥í˜• ìŠ¤ë ˆë“œ í’€(Cooperative Thread Pool)ì—ì„œ ì‘ì—…ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. ì´ ìŠ¤ë ˆë“œ í’€ì€ íŠ¹ì • ì‘ì—…ì„ ì–´ë–¤ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰í• ì§€ ë™ì ìœ¼ë¡œ ê²°ì •í•˜ë©°, ì‘ì—…ì„ í•­ìƒ ë™ì¼í•œ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰í•œë‹¤ê³  ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë§í•´, ì§ë ¬ ì‹¤í–‰ìëŠ” ê° ì‘ì—…ì„ (ë‹¨ì¼ ìŠ¤ë ˆë“œê°€ ì•„ë‹Œ) ì„œë¡œ ë‹¤ë¥¸ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰í•˜ê²Œ í•˜ë©°, ì‹¤í–‰ ì‹œì ì—” í•­ìƒ í•œ ë²ˆì— í•˜ë‚˜ì˜ ì‘ì—…ë§Œ ì‹¤í–‰ë˜ë¡ ì§ë ¬í™”í•©ë‹ˆë‹¤. ì´ëŠ” ë™ì¼í•œ ìŠ¤ë ˆë“œì—ì„œ ì‘ì—…ì´ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬ë˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ê²Œ í•˜ë©°, ê°œë…ì ìœ¼ë¡œ â€˜ë‹¨ì¼ ìŠ¤ë ˆë“œì—ì„œ ì§ë ¬ë¡œ ì‹¤í–‰í•œë‹¤â€™ê³  ì´í•´í•´ë„ ë¬´ë°©í•©ë‹ˆë‹¤. ì¤‘ìš”í•œ ê±´ ì•¡í„°ì˜ ê²©ë¦¬ëœ ìƒíƒœê°€ ë™ì‹œì— ì—¬ëŸ¬ ìŠ¤ë ˆë“œì— ë…¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì…ë‹ˆë‹¤.


## Implementing a Custom Actor Executor

{% hint style="info" %}
**Info** ì´ ì„¹ì…˜ì€ í˜„ì¬ ì‘ì„± ì¤‘ì…ë‹ˆë‹¤.
{% endhint %}



# Actor Re-entrancy and Deadlock Avoidance

ì•¡í„°ì— ê²©ë¦¬ëœ ë©”ì„œë“œëŠ” ì¬ì§„ì…(re-entrancy)ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ëŠ” í•´ë‹¹ ë©”ì„œë“œê°€ ì‹¤í–‰ ë„ì¤‘ `await` í‚¤ì›Œë“œë¥¼ ë§Œë‚˜ ì¼ì‹œ ì¤‘ë‹¨ë˜ë©´, ê·¸ ì¤‘ë‹¨ëœ ì‹œì ì— ë‹¤ë¥¸ ì‘ì—…ì´ í•´ë‹¹ ì•¡í„°ì— ì§„ì…í•˜ì—¬ ì‹¤í–‰ë  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

ì´ëŸ¬í•œ ì¬ì§„ì…ì€ ì²˜ìŒ ì•¡í„°ê°€ `await` ì§€ì ì—ì„œ ì¼ì‹œ ì¤‘ë‹¨ëœ ì‚¬ì´ì— ë‹¤ë¥¸ ì‘ì—…ì´ ë™ì¼í•œ ì•¡í„°ì˜ ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ê·¸ ê²°ê³¼, ì²˜ìŒ ì§„ì…í•œ ì‘ì—…ì´ ì¬ê°œë  ë•ŒëŠ” `await` ì•ë’¤ì˜ ìƒíƒœê°€ ë‹¬ë¼ì ¸ì„œ ì˜ë„ì¹˜ ì•Šì€ ë™ì‘ì´ë‚˜ ë¶ˆë³€ ì¡°ê±´ ê¹¨ì§ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 


```swift
(ImageDownload ì•¡í„° ì„ ì–¸)
```


{% hint style="info" %}
**Not** 
ì´ëŠ” `await` í‚¤ì›Œë“œ ìì²´ê°€ ì§ì ‘ì ì¸ ì‹¤í–‰ íš¨ê³¼ë¥¼ ê°€ì§€ì§€ ì•Šë”ë¼ë„, ëª¨ë“  ì ì¬ì ì¸ ì¼ì‹œ ì¤‘ë‹¨ ì§€ì  ì•ì— `await`ì„ ëª…ì‹œí•´ì•¼ í•˜ëŠ” ì´ìœ ì…ë‹ˆë‹¤. `await` í‚¤ì›Œë“œëŠ” í•´ë‹¹ ì§€ì ì„ ê¸°ì¤€ìœ¼ë¡œ ê³µìœ  ê°€ë³€ ìƒíƒœê°€ ë³€ê²½ë  ìˆ˜ ìˆìŒì„ ê°œë°œìì—ê²Œ ì•Œë ¤ì£¼ëŠ” ì¼ì¢…ì˜ ê²½ê³  í‘œì‹œ ì—­í• ì„ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë”°ë¼ì„œ `await` ì´ì „ì— ì½ì€ ìƒíƒœê°€ `await` ì´í›„ì—ë„ ë™ì¼í•˜ë‹¤ê³  ê°€ì •í•´ì„œëŠ” ì•ˆë©ë‹ˆë‹¤.
{% endhint %}

`EmojiDownloader`ëŠ” ì£¼ì–´ì§„ URLì— ëŒ€í•œ ì´ëª¨ì§€(Emoji)ê°€ ìºì‹œì— ì¡´ì¬í•˜ëŠ” ê²½ìš°, í•´ë‹¹ ì´ëª¨ì§€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ìºì‹œì— ì´ëª¨ì§€ê°€ ì—†ë‹¤ë©´ ë„¤íŠ¸ì›Œí¬ì—ì„œ ì´ëª¨ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•œ í›„, ì´ë¥¼ ìºì‹œì— ì €ì¥í•˜ê³  ë°˜í™˜í•©ë‹ˆë‹¤. `cache`ëŠ” ì•¡í„°ì— ê²©ë¦¬ë˜ì–´ ìˆì–´ ë‚®ì€ ìˆ˜ì¤€ì˜ ë°ì´í„° ê²½í•©ìœ¼ë¡œë¶€í„° ë³´í˜¸ë°›ìŠµë‹ˆë‹¤. í•˜ë‚˜ì˜ ì‘ë§Œì´ ì•¡í„°ì— ì§„ì…í•˜ì—¬ `cache`ì— ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  ì €ì¥í•˜ê±°ë‚˜ ì½ëŠ” ê³¼ì •ì—ì„œ ìºì‹œê°€ ì†ìƒë  ê°€ëŠ¥ì„±ì€ ì—†ì–´ ë³´ì…ë‹ˆë‹¤.

í•˜ì§€ë§Œ, ì •ë§ ì•ˆì „í•˜ë‹¤ê³  í•  ìˆ˜ ìˆì„ê¹Œìš”? ì˜ˆë¥¼ ë“¤ì–´, ë‘ ê°œì˜ ë…ë¦½ëœ ì‘ì—…ì´ ë™ì‹œì— ê°™ì€ ì´ëª¨ì§€ë¥¼ ìš”ì²­í•˜ëŠ” ìƒí™©ì„ ê°€ì •í•´ ë´…ì‹œë‹¤.

```
actor ImageDownloader {
    private var cache: [URL: Image] = [:]

    func image(from url: URL) async throws -> Image? {
        if let cached = cache[url] {
            return cached
        }

        let image = try await downloadImage(from: url)

        cache[url] = image
        return image
    }
}
```

{% stepper %}
{% step %}
### Step 1

ë¨¼ì €, 1ï¸âƒ£ë²ˆì§¸ ì‘ì—…ì´ ìºì‹œì— ğŸ”¥ ì´ëª¨ì§€ê°€ ì—†ìŒì„ í™•ì¸í•˜ê³ , ì„œë²„ì—ì„œ í•´ë‹¹ ì´ëª¨ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê¸° ì‹œì‘í•©ë‹ˆë‹¤. ì´ ë‹¤ìš´ë¡œë“œ ì‘ì—…ì€ ì‹œê°„ì´ ì†Œìš”ë˜ë¯€ë¡œ, ì‘ì—…ì€ ì¼ì‹œ ì¤‘ë‹¨ë©ë‹ˆë‹¤.

{% endstep %}
{% step %}
### Step 2

ê·¸ ì‚¬ì´, ë™ì¼í•œ URLì— â„ï¸ ì´ëª¨ì§€ê°€ ìƒˆë¡­ê²Œ ì—…ë¡œë“œë˜ì—ˆë‹¤ê³  ê°€ì •í•´ ë´…ì‹œë‹¤. ì´ì œ 2ï¸âƒ£ë²ˆì§¸ ì‘ì—…ì´ ì´ URLë¡œë¶€í„° ì´ëª¨ì§€ë¥¼ ê°€ì ¸ì˜¤ë ¤ ì‹œë„í•©ë‹ˆë‹¤.

{% endstep %}
{% step %}
### Step 3

2ï¸âƒ£ë²ˆì§¸ ì‘ì—… ì—­ì‹œ ìºì‹œì— ì´ëª¨ì§€ê°€ ì—†ìŒì„ í™•ì¸í•©ë‹ˆë‹¤. ì´ëŠ” 1ï¸âƒ£ë²ˆì§¸ ì‘ì—…ì˜ ë‹¤ìš´ë¡œë“œê°€ ì•„ì§ ì™„ë£Œë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë”°ë¼ì„œ 2ï¸âƒ£ë²ˆì§¸ ì‘ì—…ë„ ì„œë²„ë¡œë¶€í„° â„ï¸ ì´ëª¨ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê¸° ì‹œì‘í•˜ê³ , ì™„ë£Œë  ë•Œê¹Œì§€ ì¼ì‹œ ì¤‘ë‹¨ë©ë‹ˆë‹¤.

{% endstep %}
{% step %}
### Step 4

ì‹œê°„ì´ ì§€ë‚˜ 2ï¸âƒ£ë²ˆì§¸ ì‘ì—…ì´ ì™„ë£Œë˜ì–´ ì‹¤í–‰ì„ ì¬ê°œí•˜ê³ , ë°›ì€ â„ï¸ ì´ëª¨ì§€ë¥¼ ìºì‹œì— ì €ì¥í•œ ë’¤ ë°˜í™˜í•©ë‹ˆë‹¤.

{% endstep %}
{% step %}
### Step 5

ì´ì–´ì„œ, 1ï¸âƒ£ë²ˆì§¸ ì‘ì—…ë„ ì™„ë£Œë˜ì–´ ì‹¤í–‰ì„ ì¬ê°œí•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ì´ ì‘ì—…ì€ ğŸ”¥ ì´ëª¨ì§€ë¥¼ ìºì‹œì— ë®ì–´ì”ë‹ˆë‹¤. ê²°ê³¼ì ìœ¼ë¡œ, ìµœì‹  ì´ëª¨ì§€ì¸ â„ï¸ê°€ ğŸ”¥ë¡œ ë˜ëŒì•„ê°€ëŠ” ìƒí™©ì´ ë°œìƒí•©ë‹ˆë‹¤.

{% endstep %}
{% endstepper %}

1ï¸âƒ£ë²ˆì§¸ ì‘ì—…ì€ 2ï¸âƒ£ë²ˆì§¸ ì‘ì—…ì´ ë™ì¼í•œ URLì— ëŒ€í•´ ë¨¼ì € ì´ëª¨ì§€ë¥¼ ìºì‹œì— ì €ì¥í–ˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³ , ë‹¤ë¥¸ ì´ëª¨ì§€ë¡œ ì´ë¥¼ ë®ì–´ì”ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì¼ë°˜ì ìœ¼ë¡œ í•œ ë²ˆ ìºì‹œì— ì €ì¥ëœ í›„ì—ëŠ” ë™ì¼í•œ URLì— ëŒ€í•´ í•­ìƒ ê°™ì€ ì´ë¯¸ì§€ê°€ ë°˜í™˜ë˜ê¸°ë¥¼ ê¸°ëŒ€í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ìœ„ ì˜ˆì œì—ì„œëŠ” ìºì‹œì— ì €ì¥ëœ ì´ë¯¸ì§€ê°€ ì˜ˆìƒì¹˜ ì•Šê²Œ ë³€ê²½ë˜ëŠ” ê²°ê³¼ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

ìœ„ ì˜ˆì œëŠ” ì•¡í„°ì˜ ì¬ì§„ì…ì„±ìœ¼ë¡œ ì¸í•´ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë¯¸ë¬˜í•œ ë²„ê·¸ë¥¼ ë³´ì—¬ì£¼ëŠ” ëŒ€í‘œì ì¸ ì‚¬ë¡€ì…ë‹ˆë‹¤. ì‹¤í–‰ì´ ì¸í„°ë¦¬ë¹™ë˜ë”ë¼ë„, ì•¡í„°ëŠ” ì—¬ì „íˆ â€˜ë‹¨ì¼ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰ë˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ëŠ” í™˜ìƒ(single-threaded illusion)â€™ì„ ìœ ì§€í•©ë‹ˆë‹¤. ì¦‰, ì–´ë–¤ ì•¡í„°ì—ì„œë„ ë™ì‹œì— ë‘ ê°œì˜ ì‘ì—…ì´ ì‹¤í–‰ë˜ëŠ” ì¼ì€ ê²°ì½” ì—†ìŠµë‹ˆë‹¤. ì•¡í„°ëŠ” ê³µìœ  ê°€ë³€ ìƒíƒœì— ëŒ€í•œ ì €ìˆ˜ì¤€ì˜ ë°ì´í„° ê²½í•©ì—ëŠ” ì•ˆì „í•˜ì§€ë§Œ, í•­ìƒ ê³ ìˆ˜ì¤€ì˜ ê²½ìŸ ì¡°ê±´ê¹Œì§€ ë§‰ì•„ì£¼ëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤.

```swift
actor ImageDownloader {
    private var cache: [URL: Image] = [:]

    func image(from url: URL) async throws -> Image? {
        if let cached = cache[url] {
            return cached
        }

        let image = try await downloadImage(from: url)

        cache[url] = cache[url, default: image]
        return image
    }
}
```

í•˜ì§€ë§Œ, ë” ë‚˜ì€ í•´ê²°ì±…ì€ ì¤‘ë³µ ë‹¤ìš´ë¡œë“œ ìì²´ë¥¼ ë°©ì§€í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì•„ë˜ ì˜ˆì œëŠ” ì´ë³´ë‹¤ ê°œì„ ëœ ë°©ì‹ì˜ êµ¬í˜„ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

<details>

<summary>Check your assumptions after an await: A better solution</summary>

```swift
actor ImageDownloader {

   private enum CacheEntry {
       case inProgress(Task<Image, Error>)
       case ready(Image)
   }

   private var cache: [URL: CacheEntry] = [:]

   func image(from url: URL) async throws -> Image? {
       if let cached = cache[url] {
           switch cached {
           case .ready(let image):
               return image
           case .inProgress(let task):
               return try await task.value
           }
       }

       let task = Task {
           try await downloadImage(from: url)
       }

       cache[url] = .inProgress(task)

       do {
           let image = try await task.value
           cache[url] = .ready(image)
           return image
       } catch {
           cache[url] = nil
           throw error
       }
   }
}
```

</details>

ì•¡í„°ì˜ ì¬ì§„ì…ì„±ì€ ë‘ ì•¡í„°ê°€ ì„œë¡œì˜ ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ë©° ë°œìƒí•  ìˆ˜ ìˆëŠ” êµì°© ìƒíƒœ(deadlock)ë¥¼ ë°©ì§€í•´ì¤„ ë¿ë§Œ ì•„ë‹ˆë¼, ì‘ì—…ì´ ì¼ì‹œ ì¤‘ë‹¨ëœ ë™ì•ˆ ë‹¤ë¥¸ ì‘ì—…ì´ ì•¡í„°ì— ì§„ì…í•  ìˆ˜ ìˆë„ë¡ í•˜ì—¬ ë¶ˆí•„ìš”í•œ ì°¨ë‹¨(blocking)ì„ ì¤„ì—¬ì¤ë‹ˆë‹¤. ë˜í•œ, ìš°ì„ ìˆœìœ„ê°€ ë” ë†’ì€ ì‘ì—…ì´ ë¨¼ì € ì‹¤í–‰ë  ìˆ˜ ìˆëŠ” ê¸°íšŒë¥¼ ì œê³µí•¨ìœ¼ë¡œì¨ ì „ì²´ì ì¸ ì²˜ë¦¬ ì„±ëŠ¥ í–¥ìƒì—ë„ ê¸°ì—¬í•©ë‹ˆë‹¤.

{% hint style="info" %}
**Note**
ì•¡í„°ì˜ ì¬ì§„ì…ì„ í—ˆìš©í•˜ì§€ ì•Šìœ¼ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”?

ì¬ì§„ì…ì´ ê°€ëŠ¥í•œ ì•¡í„°ì™€ ëŒ€ë¹„ë˜ëŠ” ê°œë…ì€ ì¬ì§„ì…ì´ ë¶ˆê°€ëŠ¥í•œ(non-reentrant) ì•¡í„°ì…ë‹ˆë‹¤. ì´ëŠ” í•œ ì‘ì—…ì´ ì•¡í„°ì— ê²©ë¦¬ëœ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ë’¤ `await`ì„ ë§Œë‚˜ ì¼ì‹œ ì¤‘ë‹¨ë˜ë”ë¼ë„, ë‹¤ë¥¸ ì‘ì—…ì€ í•´ë‹¹ ë©”ì„œë“œì˜ ì‹¤í–‰ì´ ì™„ì „íˆ ì™„ë£Œë  ë•Œê¹Œì§€ ì•¡í„°ì— ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. ê²°ê³¼ì ìœ¼ë¡œ, í•´ë‹¹ ë©”ì„œë“œê°€ ì™„ë£Œë˜ê¸° ì „ê¹Œì§€ ì•¡í„° ì „ì²´ê°€ ë‹¤ë¥¸ ì–´ë–¤ ì‘ì—…ë„ ì²˜ë¦¬í•  ìˆ˜ ì—†ìœ¼ë©°, ì´í›„ì˜ ëª¨ë“  í˜¸ì¶œì€ ëŒ€ê¸° ìƒíƒœë¡œ ìœ ì§€ë©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ì•„ë˜ ì˜ˆì œì—ì„œ `DecisionMaker`ê°€ ì¬ì§„ì…ì´ ë¶ˆê°€ëŠ¥í•œ ì•¡í„°ë¼ê³  ê°€ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤. ì´ ê²½ìš°, `DecisionMaker`ëŠ” `friend.tell(heldBy:)` í˜¸ì¶œì´ ì™„ë£Œë  ë•Œê¹Œì§€ ë‹¤ë¥¸ ì–´ë–¤ ì‘ì—…ë„ ì•¡í„°ì— ì§„ì…í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì¦‰, í•´ë‹¹ ì‘ì—…ì´ ëë‚  ë•Œê¹Œì§€ ì•¡í„°ëŠ” ì¼ì‹œì ìœ¼ë¡œ ì ê¸´ ìƒíƒœ(lock)ì— ë†“ì´ê²Œ ë˜ë©°, ë‹¤ë¥¸ ëª¨ë“  í˜¸ì¶œì€ ëŒ€ê¸° ìƒíƒœë¡œ ìœ ì§€ë©ë‹ˆë‹¤.

```swift
// assume non-reentrant
actor DecisionMaker {
  let friend: DecisionMaker
  var opinion: Decision = .noIdea

  func thinkOfGoodIdea() async -> Decision {
    opinion = .goodIdea                                   
    await friend.tell(opinion, heldBy: self)
    return opinion // âœ… always .goodIdea
  }

  func thinkOfBadIdea() async -> Decision {
    opinion = .badIdea
    await friend.tell(opinion, heldBy: self)
    return opinion // âœ… always .badIdea
  }
}

extension DecisionMaker {
  func tell(_ opinion: Decision, heldBy friend: DecisionMaker) async {
    if opinion == .badIdea {
      await friend.convinceOtherwise(opinion)
    }
  }
}
```

Aliceì™€ Bobì´ë¼ëŠ” ë‘ ì¹œêµ¬ê°€ ì˜ê²¬ì„ ì£¼ê³ ë°›ìœ¼ë©° í‹°í‚¤íƒ€ì¹´ë¥¼ í•˜ëŠ” ìƒí™©ì„ ì•¡í„°ë¡œ ëª¨ë¸ë§í•´ë³´ê² ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Aliceê°€ Bobì—ê²Œ `thinkOfGoodIdea()`ë¥¼ í˜¸ì¶œí•˜ë©° ì¢‹ì€ ì•„ì´ë””ì–´ë¥¼ ì „ë‹¬í•˜ë©´, Bobì˜ `tell(heldBy:)` ë©”ì„œë“œëŠ” ì•„ë¬´ëŸ° ì¶”ê°€ ë™ì‘ì„ í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, ì´ ê²½ìš°ì—ëŠ” êµì°© ìƒíƒœê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ, ë‘ ì¹œêµ¬ê°€ `thinkOfBadIdea()`ë¥¼ í˜¸ì¶œí•´ ë‚˜ìœ ì˜ê²¬ì„ ì£¼ê³  ë°›ëŠ” ìƒí™©ì—ì„œëŠ” ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤. AliceëŠ” Bobì—ê²Œ `tell(heldBy:)`ë¥¼ í˜¸ì¶œí•˜ê³ , ê·¸ ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ì¼ì‹œ ì¤‘ë‹¨ëœ ìƒíƒœì— ë“¤ì–´ê°‘ë‹ˆë‹¤. ê·¸ëŸ°ë° Bobì€ ì´ ì˜ê²¬ì´ ë§ˆìŒì— ë“¤ì§€ ì•Šì•„, `convinceOtherwise()`ë¥¼ í˜¸ì¶œí•˜ë©° ë‹¤ì‹œ Aliceì—ê²Œ ì˜ê²¬ì„ ë°”ê¾¸ë¼ê³  ì„¤ë“í•˜ë ¤ê³  í•©ë‹ˆë‹¤. ê·¸ë¼ë‚˜, ì´ ì‹œì ì—ì„œ AliceëŠ” ì•„ì§ `tell(heldBy:)` í˜¸ì¶œì˜ ê²°ê³¼ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆëŠ” ìƒíƒœì´ë¯€ë¡œ, Bobì´ Aliceì—ê²Œ ì¬ì§„ì…ì„ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê²°ê³¼ì ìœ¼ë¡œ, AliceëŠ” Bobì˜ ì‘ë‹µì„, Bobì€ Aliceì˜ ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ë©° ì„œë¡œê°€ ì„œë¡œì˜ ì‘ì—…ì„ ë§‰ëŠ” êµì°© ìƒíƒœì— ë¹ ì§€ê²Œ ë©ë‹ˆë‹¤.

ê·¸ë ‡ë‹¤ë©´, ë§Œì•½ ì´ ì•¡í„°ë“¤ì´ ì¬ì§„ì…ì´ ê°€ëŠ¥í–ˆë‹¤ë©´ ì–´ë–»ê²Œ ëì„ê¹Œìš”? Bobì´ Aliceì—ê²Œ `convinceOtherwise()`ë¥¼ í˜¸ì¶œí•˜ë”ë¼ë„, AliceëŠ” ì¬ì§„ì…ì„ í—ˆìš©í•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ì‘ë‹µì„ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ ê²°ê³¼, Bobì˜ `tell(heldBy:)`ë„ ì™„ë£Œë˜ë©°, AliceëŠ” ë‹¤ì‹œ Bobìœ¼ë¡œë¶€í„° ì‘ë‹µì„ ë°›ì•„ ìì‹ ì˜ ì‘ì—…ì„ ë§ˆë¬´ë¦¬í•˜ê²Œ ë©ë‹ˆë‹¤. 

ì¦‰, ì¬ì§„ì…ì´ ê°€ëŠ¥í•œ ì•¡í„°ëŠ” ì´ëŸ° ìˆœí™˜ í˜¸ì¶œ ìƒí™©ì—ì„œë„ êµì°© ìƒíƒœì—†ì´ ìì—°ìŠ¤ëŸ½ê²Œ íë¦„ì„ ì´ì–´ê°ˆ ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.
{% endhint %}


## Actor Reprioritization

ì•¡í„°ì˜ ì¬ì§„ì…ì„±ì€ ìš°ì„ ìˆœìœ„ ì—­ì „ì„ ë°©ì§€í•˜ëŠ” ë°ì—ë„ ë„ì›€ì´ ì¤ë‹ˆë‹¤. ê¸°ì¡´ì˜ ì§ë ¬ ë””ìŠ¤íŒ¨ì¹˜ íëŠ” ëª¨ë“  ì‘ì—…ì„ ì—„ê²©í•œ ì„ ì…ì„ ì¶œ(FIFO) ìˆœì„œë¡œ ì‹¤í–‰í•˜ëŠ” ë°˜ë©´, ì•¡í„°ì˜ ê¸°ë³¸ ì‹¤í–‰ìì¸ ì§ë ¬ ì‹¤í–‰ìëŠ” ì´ë³´ë‹¤ ë” ê²½ëŸ‰í™”ë˜ê³  ìœ ì—°í•œ êµ¬ì¡°ë¥¼ ê°–ìŠµë‹ˆë‹¤. ì´ ë•ë¶„ì—, ì•¡í„°ëŠ” ë‹¤ìŒì— ì‹¤í–‰í•  ì‘ì—…ì„ ì„ íƒí•  ë•Œ, ìš°ì„ ìˆœìœ„ê°€ ë” ë†’ì€ ì‘ì—…ì„ ìš°ì„ ì ìœ¼ë¡œ ì‹¤í–‰í•¨ìœ¼ë¡œì¨, ë‚®ì€ ìš°ì„ ìˆœìœ„ ì‘ì—…ì— ì˜í•œ ìš°ì„ ìˆœìœ„ ì—­ì „ í˜„ìƒì„ íš¨ê³¼ì ìœ¼ë¡œ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì•ì„œ ì‚´í´ë³¸ ì´ëª¨ì§€ ë‹¤ìš´ë¡œë“œ ì˜ˆì œì—ì„œëŠ” ì‘ì—… 2ï¸âƒ£ê°€ ì‘ì—… 1ï¸âƒ£ë³´ë‹¤ ë‚˜ì¤‘ì— ì•¡í„°ì— ì§„ì…í–ˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  ë¨¼ì € ì™„ë£Œë˜ëŠ” ëª¨ìŠµì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì´ì²˜ëŸ¼ ì•¡í„°ê°€ ì¬ì§„ì…ì„±ì„ ì§€ì›í•˜ë©´, ì‘ì—…ë“¤ì´ ë°˜ë“œì‹œ ì„ ì…ì„ ì¶œ(FIFO) ìˆœì„œë¡œ ì‹¤í–‰ë˜ê³  ì¢…ë£Œë  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤. ì¦‰, ìš°ì„ ìˆœìœ„ê°€ ë‚®ì€ ì‘ì—… 1ï¸âƒ£ì´ ë¨¼ì € ì‹¤í–‰ë˜ì—ˆë‹¤ í•˜ë”ë¼ë„, Swift ëŸ°íƒ€ì„ì€ íì— ëŒ€ê¸° ì¤‘ì¸ ì‘ì—…ë“¤ì„ ë¶„ì„í•˜ì—¬, ì‘ì—… 1ï¸âƒ£ì´ `await` ì§€ì ì—ì„œ ì¼ì‹œ ì¤‘ë‹¨ë˜ë©´, ìš°ì„ ìˆœìœ„ê°€ ë” ë†’ì€ ì‘ì—… 2ï¸âƒ£ì—ê²Œ ì‹¤í–‰ ê¸°íšŒë¥¼ ìš°ì„ ì ìœ¼ë¡œ ë¶€ì—¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë°©ì‹ì€ ì‘ì—… ê°„ì˜ ì‹¤í–‰ ìˆœì„œì™€ ìì› ë°°ë¶„ ë¹„ì¤‘ì„ ë™ì ìœ¼ë¡œ ì¡°ì •í•¨ìœ¼ë¡œì¨ ì „ì²´ì ì¸ ì²˜ë¦¬ íš¨ìœ¨ì„ ë†’ì´ëŠ” ë° ê¸°ì—¬í•©ë‹ˆë‹¤.

{% hint style="info" %}
**Note**
ë§Œì•½ ì•¡í„°ì— ê²©ë¦¬ëœ ë©”ì„œë“œê°€ `await` ì§€ì  ì—†ì´ ì‹¤í–‰ëœë‹¤ë©´, ìš°ì„ ìˆœìœ„ëŠ” ì–´ë–»ê²Œ ì¡°ì •ë  ìˆ˜ ìˆì„ê¹Œìš”? ë§Œì•½ ì•¡í„°ì—ì„œ ìš°ì„ ìˆœìœ„ê°€ ë‚®ì€ ì‘ì—… ğŸ…ê°€ ì‹¤í–‰ ì¤‘ì´ê³ , ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ ì‘ì—… ğŸ…‘ê°€ ì ‘ê·¼ì„ ì‹œë„í•œë‹¤ë©´, Swift ëŸ°íƒ€ì„ì€ ì‘ì—… ğŸ…ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ì¼ì‹œì ìœ¼ë¡œ ìŠ¹ê²©ì‹œì¼œ ì²˜ë¦¬ ì†ë„ë¥¼ ë†’ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‘ì—… ğŸ…ê°€ ë³´ë‹¤ ë¹ ë¥´ê²Œ ì¢…ë£Œë˜ì–´, ì‘ì—… ğŸ…‘ê°€ ì§€ì—° ì—†ì´ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ ë•ìŠµë‹ˆë‹¤. ~~ìì„¸í•œ ë‚´ìš©ì€ [Task]()ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.~~
{% endhint %}


# Actor Hopping

ì•¡í„°ì— ê²©ë¦¬ëœ ë©”ì„œë“œì—ì„œ ë‹¤ë¥¸ ì•¡í„°ì— ê²©ë¦¬ëœ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ì„œ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì „í™˜ë˜ëŠ” í˜„ìƒì„ ì•¡í„° í™‰í•‘(Actor Hopping)ì´ë¼ê³  í•©ë‹ˆë‹¤. ì´ ê³¼ì •ì€ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­(Context Switching)ì„ ìˆ˜ë°˜í•˜ë©°, ê¸°ì¡´ ì‘ì—…ì´ ì¼ì‹œ ì¤‘ë‹¨ëœ ë’¤ ìƒˆë¡œìš´ ì•¡í„°ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì¬ê°œë˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ì•¡í„° í™‰í•‘ì´ ìì£¼ ë°œìƒí•˜ë©´ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ ë¹ˆë²ˆí•œ ì „í™˜ìœ¼ë¡œ ì¸í•´, ì‘ì—…ì˜ ì¼ì‹œ ì¤‘ë‹¨ê³¼ ì¬ê°œ, ì‘ì—… í ê°„ ì „ë‹¬, ìŠ¤ë ˆë“œ ê°„ ì „í™˜ ë“± ë‹¤ì–‘í•œ í˜•íƒœì˜ ì˜¤ë²„í—¤ë“œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì„±ëŠ¥ì„ ê³ ë ¤í•  ë•ŒëŠ” ë¶ˆí•„ìš”í•œ ì•¡í„° í™‰í•‘ì„ ì¤„ì´ëŠ” ë°©í–¥ìœ¼ë¡œ ì•¡í„°ë¥¼ ì„¤ê³„í•´ì•¼ í•©ë‹ˆë‹¤.

{% hint style="info" %}
**Note**
Swift Concurrencyì—ì„œ ë§í•˜ëŠ” ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ì€ ì¼ë°˜ì ì¸ ì˜ë¯¸ì˜ ìŠ¤ë ˆë“œ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­(Thread Context Switching) â€” ì¦‰, ìŠ¤ë ˆë“œ ë¬¸ë§¥ì„ ì €ì¥í•˜ê³  ë³µì›í•˜ëŠ” ì‘ì—… â€” ì„ ì˜ë¯¸í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. Swift ConcurrencyëŠ” í˜‘ë ¥í˜• ìŠ¤ë ˆë“œ í’€ ëª¨ë¸ì„ ì±„íƒí•˜ê³  ìˆìœ¼ë©°, ì‹¤í–‰ì— ì‚¬ìš©ë˜ëŠ” ìŠ¤ë ˆë“œì˜ ìˆ˜ëŠ” ë¬¼ë¦¬ì ì¸ CPU ì½”ì–´ ìˆ˜ë¥¼ ì´ˆê³¼í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, í•œ CPU ì½”ì–´ì—ì„œ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ì§§ì€ ì‹œê°„ ê°„ê²©ìœ¼ë¡œ ë²ˆê°ˆì•„ ì‹¤í–‰ë˜ë©° ë°œìƒí•˜ëŠ” ìŠ¤ë ˆë“œ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ì€ ì¼ì–´ë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
{% endhint %}

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       í”„ë¡œê·¸ë¨ì˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Task A                â”‚  â”‚
â”‚  â”‚  await counter.inc()   â”‚ â”€â”‚â”€â”€â”€â”  
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚      
â”‚                              â”‚   â”‚ ğŸ‘·ğŸ¼â€â™€ï¸ ì‘ì—… ìš”ì²­ ì „ë‹¬!
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  Task B                â”‚  â”‚   â”‚
â”‚  â”‚  await counter.get()   â”‚ â”€â”‚â”€â” â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚ â”‚ ğŸ‘·ğŸ» ì‘ì—… ìš”ì²­ ì „ë‹¬!
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
                                 â–¼ â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            actor Counter            â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  (ê²©ë¦¬ëœ ë‚´ë¶€ ìƒíƒœ)                     â”‚
â”‚  var value: Int                     â”‚
â”‚                                     â”‚
â”‚  func increment() -> Int            â”‚
â”‚                                     â”‚
â”‚  ğŸ”’ ë‚´ë¶€ ìƒíƒœëŠ” ì•¡í„°ë§Œ ì§ì ‘ ì ‘ê·¼ ê°€ëŠ¥       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Serial Executor   â”‚  â—€â”€ ì‘ì—…ë“¤ì„ í•œ ë²ˆì— í•˜ë‚˜ì”© ì²˜ë¦¬
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

UI ë Œë”ë§ ë° ì´ë²¤íŠ¸ ì²˜ë¦¬ ì½”ë“œëŠ” ëª¨ë‘ ë©”ì¸ ì•¡í„°(MainActor)ì— ê²©ë¦¬ë˜ì–´ ë©”ì¸ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤. ë°˜ë©´, ê·¸ ì™¸ì˜ ì¼ë°˜ ì•¡í„°ëŠ” ë©”ì¸ ìŠ¤ë ˆë“œì™€ ë¶„ë¦¬ëœ í˜‘ë ¥í˜• ìŠ¤ë ˆë“œ í’€ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.

ë™ì¼í•œ í˜‘ë ¥í˜• ìŠ¤ë ˆë“œ í’€ ë‚´ì—ì„œ ë°œìƒí•˜ëŠ” ì¼ë°˜ ì•¡í„° ê°„ì˜ í™‰í•‘ì€ ì¼ë°˜ì ìœ¼ë¡œ ì„±ëŠ¥ì— í° ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤. ì‘ì—…ì€ ìŠ¤ì¼€ì¤„ëŸ¬ì— ì˜í•´ ê¸°ì¡´ ìŠ¤ë ˆë“œì—ì„œ ê·¸ëŒ€ë¡œ ì´ì–´ì§ˆ ìˆ˜ë„ ìˆê³ , ìƒí™©ì— ë”°ë¼ ë‹¤ë¥¸ ìŠ¤ë ˆë“œì—ì„œ ì¬ê°œë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ ìŠ¤ë ˆë“œ í’€ ë‚´ë¶€ì—ì„œì˜ ì•¡í„° í™‰í•‘ì€ ë§¤ìš° ë¹ ë¥´ê³  íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

í•˜ì§€ë§Œ ë©”ì¸ ì•¡í„°ì™€ ì¼ë°˜ ì•¡í„° ê°„ì˜ í™‰í•‘ì€ ìƒí™©ì´ ë‹¤ë¦…ë‹ˆë‹¤. ë©”ì¸ ì•¡í„°ì™€ ì¼ë°˜ ì•¡í„°ì˜ ì‹¤í–‰ í™˜ê²½ì€ ë¬¼ë¦¬ì ìœ¼ë¡œ ë¶„ë¦¬ë˜ì–´ ìˆê¸° ë•Œë¬¸ì—, ì´ë“¤ ê°„ì˜ í™‰í•‘ì€ í•„ì—°ì ìœ¼ë¡œ ì‹¤ì œ ìŠ¤ë ˆë“œ ì „í™˜ì„ ìˆ˜ë°˜í•˜ê²Œ ë˜ë©°, ì´ëŠ” ìƒëŒ€ì ìœ¼ë¡œ ë” ë†’ì€ ë¹„ìš©ì„ ì´ˆë˜í•˜ê²Œ ë©ë‹ˆë‹¤.

```swift
// on database actor
func loadArticle(with id: ID) async throws -> Article { ... }

@MainActor
func updateUI(for article: Article) { ... }

@MainActor
func updateArticles(for ids: [ID]) async throws {
    for id in ids {
        let article = try await loadArticle(with: id)  // ğŸ’¥ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­
        await updateUI(for: article)
    }
}
```

```
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
| loadArticle | ğŸ’¥ | updateUI | ğŸ’¥ | loadArticle | ğŸ’¥ | updateUI | ãƒ»ãƒ»ãƒ»
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ’¥: ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­
```

ë©”ì¸ ì•¡í„°ì— ê²©ë¦¬ëœ `updateArticles(for:)` ë©”ì„œë“œëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì•¡í„°ë¡œë¶€í„° ê¸°ì‚¬ë¥¼ ë¶ˆëŸ¬ì˜¤ê³ , ê° ê¸°ì‚¬ë¥¼ UIì— ë°˜ì˜í•©ë‹ˆë‹¤. ì´ë•Œ `for` ë°˜ë³µë¬¸ì˜ ê° ë£¨í”„ë§ˆë‹¤ ìµœì†Œ ë‘ ë²ˆì˜ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ì´ ë°œìƒí•©ë‹ˆë‹¤. í•˜ë‚˜ëŠ” ë©”ì¸ ì•¡í„°ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ì•¡í„°ë¡œì˜ ì „í™˜, ë‹¤ë¥¸ í•˜ë‚˜ëŠ” ë‹¤ì‹œ ë©”ì¸ ì•¡í„°ë¡œ ë³µê·€í•˜ëŠ” ì „í™˜ì…ë‹ˆë‹¤. ì¦‰, ê° ë°˜ë³µë§ˆë‹¤ ë‘ ê°œì˜ ìŠ¤ë ˆë“œê°€ ì§§ì€ ì‹œê°„ ê°„ê²©ìœ¼ë¡œ êµëŒ€ë¡œ ì‹¤í–‰ë˜ëŠ” íŒ¨í„´ì´ ë°˜ë³µë©ë‹ˆë‹¤. ë£¨í”„ ë°˜ë³µ íšŸìˆ˜ê°€ ì ê³ , ê° ë°˜ë³µì—ì„œ ìˆ˜í–‰í•˜ëŠ” ì‘ì—…ëŸ‰ì´ ì¶©ë¶„íˆ í´ ê²½ìš°ì—ëŠ” í° ë¬¸ì œê°€ ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë©”ì¸ ì•¡í„°ì—ì„œ ë²—ì–´ë‚¬ë‹¤ ë‹¤ì‹œ ëŒì•„ì˜¤ëŠ” í™‰í•‘ì´ ë°˜ë³µì ìœ¼ë¡œ ë°œìƒí•  ê²½ìš°, ìŠ¤ë ˆë“œ ì „í™˜ì— ë”°ë¥¸ ëˆ„ì  ë¹„ìš©ìœ¼ë¡œ ì¸í•´ ì‹¤í–‰ ì„±ëŠ¥ì´ ì €í•˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
 // on database actor
func loadArticles(with ids: [ID]) async throws -> Article { ... }

@MainActor
func updateUI(for articles: [Article]) { ... }

@MainActor
func updateArticles(for ids: [ID]) async throws {
    let articles = try await loadArticle(with: ids) 
    await updateUI(for: articles)
}
```

ìŠ¤ë ˆë“œ ì „í™˜ ë¹„ìš©ì„ ì¤„ì´ê¸° ìœ„í•´ì„œëŠ” ë©”ì¸ ì•¡í„°ì—ì„œ ì²˜ë¦¬í•  ì‘ì—…ì„ ê°€ëŠ¥í•œ í•œ ë¬¶ì–´ì„œ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ê° ë£¨í”„ì˜ ì‘ì—…ì„ `loadArticles(with:)` ë° `updateUI(for:)`ì™€ ê°™ì€ ë©”ì„œë“œë¡œ ë¶„ë¦¬í•˜ì—¬, ê°œë³„ í•­ëª©ì´ ì•„ë‹Œ ë°°ì—´ ë‹¨ìœ„ë¡œ í•œ ë²ˆì— ì²˜ë¦¬í•˜ë„ë¡ ë¦¬íŒ©í† ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‘ì—…ì„ ë¬¶ì–´ ì¼ê´„ ì²˜ë¦¬í•˜ë©´ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ íšŸìˆ˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìœ¼ë©°, ë©”ì¸ ìŠ¤ë ˆë“œì™€ ë‹¤ë¥¸ ì•¡í„° ê°„ì˜ ì „í™˜ìœ¼ë¡œ ì¸í•œ ì„±ëŠ¥ ì˜¤ë²„í—¤ë“œë„ íš¨ê³¼ì ìœ¼ë¡œ ì™„í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì²˜ëŸ¼, ë©”ì¸ ì•¡í„°ì™€ ë‹¤ë¥¸ ì•¡í„° ê°„ì˜ ì „í™˜ì´ ë°˜ë³µì ìœ¼ë¡œ ë°œìƒí•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì—¬ ì•¡í„°ë¥¼ ì„¤ê³„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

{% hint style="info" %}
**Note**
ì¼ë°˜ ì•¡í„° ê°„ì˜ í™‰í•‘ ë™ì¼í•œ í˜‘ë ¥í˜• ìŠ¤ë ˆë“œ í’€ ë‚´ì—ì„œ ì´ë£¨ì–´ì§„ë‹¤ê³  í•˜ë”ë¼ë„, ê°€ëŠ¥í•˜ë©´ í”¼í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì¼ë°˜ ì•¡í„° ê°„ì˜ í™‰í•‘ì€ ë©”ì¸ ì•¡í„°ì™€ ì¼ë°˜ ì•¡í„° ê°„ì˜ í™‰í•‘ë³´ë‹¤ ì‹¤ì œ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ì´ ë°œìƒí•  ê°€ëŠ¥ì„±ì€ ë‚®ì§€ë§Œ, ì™„ì „íˆ ë°°ì œí•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ 'ì–´ë–¤ í™‰í•‘ì€ ë¹„ìš©ì´ ì ê³ , ì–´ë–¤ í™‰í•‘ì€ í¬ë‹¤'ëŠ” ì‹ì˜ ì´ë¶„ë²•ì ì¸ êµ¬ë¶„ì€ ì‹¤ì§ˆì ì¸ ì˜ë¯¸ê°€ í¬ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë©°, ëª¨ë“  í˜•íƒœì˜ ì•¡í„° ê°„ í™‰í•‘ì€ ë¶ˆí•„ìš”í•˜ê²Œ ë°˜ë³µë˜ì§€ ì•Šë„ë¡ ìµœì†Œí™”í•˜ëŠ” ê²ƒì´ ë°”ëŒì§í•©ë‹ˆë‹¤.
{% endhint %}


# Actor Contentions

í•œ ë²ˆì— í•˜ë‚˜ì˜ ì‘ì—…ë§Œ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•œë‹¤ëŠ” ì•¡í„°ì˜ ì´ëŸ¬í•œ íŠ¹ì„±ì€ ë³‘ë ¬ ì²˜ë¦¬ì˜ ì´ì ì„ í™œìš©í•˜ê¸° ì–´ë µë‹¤ëŠ” ë‹¨ì ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ë³‘ë ¬ì„±(Parellelism)ì´ ì¤‘ìš”í•œ ì‘ì—…ì´ë¼ë©´ ê°€ëŠ¥í•œ ë¶€ë¶„ì€ ì•¡í„° ì™¸ë¶€ì—ì„œ ì²˜ë¦¬í•˜ê³ , ì •ë§ í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì•¡í„°ì— ì ‘ê·¼í•˜ë„ë¡ í•˜ì—¬ ì•¡í„°ì— ë¨¸ë¬´ëŠ” ì‹œê°„ì„ ìµœì†Œí™”í•´ì•¼ í•©ë‹ˆë‹¤. ì•¡í„°ì— ëŒ€í•œ ì ‘ê·¼ì„ ê°€ëŠ¥í•œ í•œ ì‘ì€ ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•˜ë©´, ì „ì²´ì ì¸ ì²˜ë¦¬ ì„±ëŠ¥ì„ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
actor CompressionUtils {

    var logs: [String] = []

    nonisolated func compress(with file: FileStatus) async -> Data {
        await log(update: "ğŸ”´ ì••ì¶• ì‹œì‘: \(file.name)")
        let compressedData = compressFile(
            for: file
        ) { size in
            Task { @MainActor in
                state.update(name: file.name, uncompressedSize: size)
            }
        } progressNotification: { progress in
            Task { @MainActor in
                state.update(name: file.name, progress: progress)
                await log(update: "ğŸ”µ ì••ì¶• ì§„í–‰ ì¤‘: \(progress)")
            }
        } finalNotification: { size in
            Task { @MainActor in
                state.update(name: file.name, compressedSize: size)
            }
        }
        await log(update: "ğŸ”µ ì••ì¶• ì™„ë£Œ: \(file.name)")

        return compressedData
    }
}
```
